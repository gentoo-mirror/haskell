# Copyright 1999-2025 Gentoo Authors
# Distributed under the terms of the GNU General Public License v2

EAPI=8

# ebuild generated by hackport 0.9.0.0.9999

# If ttrender ever builds, change this to ttrender:executable
#hackport: flags: -ttrender

CABAL_HACKAGE_REVISION=1

CABAL_FEATURES="lib profile haddock hoogle hscolour"
inherit haskell-cabal

DESCRIPTION="Visualize Haskell data structures as edge-labeled trees"
HOMEPAGE="https://hackage.haskell.org/package/tracetree"

LICENSE="BSD"
SLOT="0/${PV}"
KEYWORDS="~amd64"

CABAL_CHDEPS=(
	'bifunctors   >= 4.2 && < 5.6' 'bifunctors >=4.2'
	'containers   >= 0.5 && < 0.6' 'containers >=0.5'
	'mtl          >= 2.2 && < 2.3' 'mtl >=2.2'
	'transformers >= 0.4 && < 0.6' 'transformers >=0.4'
	'json                 >= 0.9  && < 0.10' 'json >=0.9'
	'optparse-applicative >= 0.11 && < 0.15' 'optparse-applicative >=0.11'
	'regex-posix          >= 0.95 && < 0.96' 'regex-posix >=0.95'
	'SVGFonts             >= 1.5  && < 1.7' 'SVGFonts >=1.5'
)

RDEPEND=">=dev-haskell/bifunctors-4.2:=[profile?]
	>=dev-haskell/json-0.9:=[profile?] <dev-haskell/json-0.11:=[profile?]
	>=dev-lang/ghc-9.0.2:=
"
#	ttrender? ( >=dev-haskell/colour-2.3:=[profile?] <dev-haskell/colour-2.4:=[profile?]
#			>=dev-haskell/diagrams-cairo-1.3:=[profile?] <dev-haskell/diagrams-cairo-1.5:=[profile?]
#			>=dev-haskell/diagrams-contrib-1.3:=[profile?] <dev-haskell/diagrams-contrib-1.5:=[profile?]
#			>=dev-haskell/diagrams-lib-1.3:=[profile?] <dev-haskell/diagrams-lib-1.5:=[profile?]
#			>=dev-haskell/optparse-applicative-0.11:=[profile?]
#			>=dev-haskell/parsec-3.1:=[profile?] <dev-haskell/parsec-3.2:=[profile?]
#			>=dev-haskell/regex-posix-0.95:=[profile?]
#			>=dev-haskell/svgfonts-1.5:=[profile?] )

DEPEND="${RDEPEND}
	>=dev-haskell/cabal-3.4.1.0
"

# ttrender fails to build
src_configure() {
	haskell-cabal_src_configure \
		--flag=-ttrender
}
